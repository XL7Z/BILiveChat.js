<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="content-language" content="zh-CN">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta content="never" name="referrer">

    <title>BiliBili_PlayWithMe_BiLiveChat - 雪狼七组/ProjectP3：BiLive</title>
    <meta name="author" content="[XL7Z]Ms_KuroNeko">

    <!-- https://github.com/LinusU/decode-utf8 -->
    <script src="./../Lib/LinusU/decode-utf8.js" type="text/javascript"></script>
    <!-- https://gitee.com/XL8Z/BiliBili_PlayWithMe_JS -->
    <script src="./../Lib/BiliBili_PlayWithMe_JSONP.js" type="text/javascript"></script>


</head>

<body>
    <div id="div_Main">
        <div id="div_Outputer">
            <h1>你已经进入了测试页面，请按 [F12] 打开调试工具</h1>
            <hr/>
        </div>
    </div>
</body>



<!-- 插件设置与初始化部分，一定放在最后，不然可能出现需要的JS代码未加载的问题 -->
<script>
    // 手动设置直播间号码
    BiliBili_PlayWithMe.LiveRoomID = 4639581;

    let Outputer = window.document.getElementById('div_Outputer');


    // 收到新弹幕后会触发下面的 BiliBili_PlayWithMe.NewDanmaku 方法，在这里写你自己的JS代码
    // Dmk 的值如下
    let 弹幕数据样本 = {
        "fans_medal_level": 21,
        "fans_medal_name": "官方",
        "fans_medal_wearing_status": false,
        "guard_level": 0,
        "msg": "你们谁扔个小心心呗",
        "timestamp": 1650717881,
        "uid": 3102384,
        "uname": "猫裙少年泽远喵",
        "uface": "http://i0.hdslb.com/bfs/face/7ced8612a3f3ef10e7238ee22b4c6948d3f53139.jpg",
        "room_id": 4639581
    };
    BiliBili_PlayWithMe.NewDanmaku = (Dmk) => {
        Outputer.innerHTML += UtilTools.Timestamp2DateStr(Dmk.timestamp) + " [" + Dmk.fans_medal_name + "] " + Dmk.uname + " 说 " + Dmk.msg + '<hr>';
    }

    // 收到新礼物后会触发下面的 BiliBili_PlayWithMe.NewGifts 方法，在这里写你自己的JS代码
    // Gft 的值如下
    let 礼物数据样本 = {
        "uid": 114439178,
        "uname": "不忘韩文初心",
        "uface": "http://i2.hdslb.com/bfs/face/e549b18085113c6f824c0eefaf2c9d9dcaf5a1d5.jpg",
        "gift_id": 30607,
        "gift_name": "小心心",
        "gift_num": 1,
        "price": 0, //道具金瓜子估值(1000 = 1元 = 10电池)，盲盒会显示爆出道具的价值
        "paid": false, //是否收费道具
        "fans_medal_level": 25,
        "fans_medal_name": "官方",
        "guard_level": 3,
        "timestamp": 1650717898, // UNIX时间戳
        "anchor_info": {
            "uface": "http://i0.hdslb.com/bfs/face/7ced8612a3f3ef10e7238ee22b4c6948d3f53139.jpg",
            "uid": 3102384,
            "uname": "猫裙少年泽远喵"
        }
    };
    BiliBili_PlayWithMe.NewGifts = (Gft) => {
        Outputer.innerHTML += Gft.uname + " 送了 " + Gft.gift_num + " 个 " + Gft.gift_name + '<hr>';
    }

    // 粉丝上舰后会触发下面的 BiliBili_PlayWithMe.NewGuard 方法，在这里写你自己的JS代码
    // Grd 的值如下
    let 上舰数据样本 = {
        "user_info": {
            "uface": "http://i0.hdslb.com/bfs/face/7ced8612a3f3ef10e7238ee22b4c6948d3f53139.jpg",
            "uid": 3102384,
            "uname": "猫裙少年泽远喵"
        },
        "guard_level": 2, //对应的大航海等级 1总督 2提督 3舰长
        "guard_num": 1,
        "guard_unit": "月", // (个月)
        "fans_medal_level": 24, //粉丝勋章等级
        "fans_medal_name": "官方", //粉丝勋章名
        "fans_medal_wearing_status": true, //当前佩戴的粉丝勋章佩戴状态
        "room_id": 4639581
    };
    BiliBili_PlayWithMe.NewGuard = (Grd) => {
        Outputer.innerHTML += Grd.user_info.uname + " 送了 " + Grd.guard_num + " 个 " + Grd.gift_name + '<hr>';
    }

    // 收到新礼物后会触发下面的 BiliBili_PlayWithMe.NewGifts 方法，在这里写你自己的JS代码
    // Gft 的值如下
    let SC数据样本 = {
        "room_id": 4639581, //直播间id
        "uid": 3102384, //购买用户UID
        "uname": "猫裙少年泽远喵", //购买的用户昵称
        "uface": "http://i0.hdslb.com/bfs/face/7ced8612a3f3ef10e7238ee22b4c6948d3f53139.jpg", //购买用户头像
        "message_id": 114514, //留言id(风控场景下撤回留言需要)
        "message": "SC打钱喵", //留言内容
        "rmb": 450, //支付金额(元)
        "timestamp": 1652303610, //赠送时间
        "start_time": 1652303612, //生效开始时间
        "end_time": 1652303672, //生效结束时间
        "guard_level": 2, //对应房间大航海登记    (新增) 
        "fans_medal_level": 26, //对应房间勋章信息  (新增) 
        "fans_medal_name": "官方", //对应房间勋章名字  (新增) 
        "fans_medal_wearing_status": true //当前佩戴的粉丝勋章佩戴状态   (新增)
    };
    BiliBili_PlayWithMe.NewSC = (SC) => {
        Outputer.innerHTML += SC.uname + " 送了 " + SC.gift_num + " 个 " + SC.gift_name + '<hr>';
    }


    // 收到新礼物后会触发下面的 BiliBili_PlayWithMe.NewGifts 方法，在这里写你自己的JS代码
    // Gft 的值如下
    let SC撤回 = {
        "room_id": 4639581, //直播间id
        "message_ids": [114, 514], // 留言id
    };
    BiliBili_PlayWithMe.SCDel = (SC) => {
        Outputer.innerHTML += Gft.uname + " 送了 " + Gft.gift_num + " 个 " + Gft.gift_name + '<hr>';
    }

    // 初始化PlayWithMe.js
    let BiliPWM = new BiliBili_PlayWithMe();
    // 由某喵的代签服务器向B站申请进行WEBSocket长连接，成功了会自动连入
    BiliPWM.PrepareWEBSocketConnection_WithRemoteAuthorizerServer_UseJSONP();
    // 执行到这里没问题的话，有弹幕就会自动调用你的代码了
</script>

</html>

</html>